<!doctype html>
<!--
	This code is copyright Stephen C Phillips (http://scphillips.com).
	It is licensed under GPL v3.
-->
<html class="no-js" lang="">
<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>BBC Radio</title>
		<meta name="description" content="Control page for tuning in to BBC radio stations">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="css/normalize.css">
		<link rel="stylesheet" href="css/font-awesome.min.css">
		<!--link rel="stylesheet" href="css/main.css"-->
		<link rel="stylesheet" href="css/custom.css">
</head>
<body>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>
	<script src="js/main.js"></script>

	<div id="header">
		<span><a href="javascript:status()"><i class="fa fa-refresh"></i></a> <span id="status"></span></span>
	</div>

	<form>
		<ul id="stations">
			<li><input type="radio" name="station" id="Stopped" value=""><label for="Stopped">Stop</label></li>
		</ul>
	</form>

	<div id="footer">
		<span><a href="javascript:reset()">Reset</a></span>
	</div>

	<script>
		// once DOM loaded, get all the stations and create their radio buttons
		$(document).ready(function() {
			$.ajax({
				type: "GET",
				url: "/stations",
				dataType: "json",
				success: function(data) {
					$.each(data.stations, function(index, value) {
						var input = $("<input>", {
							type: "radio",
							name: "station",
							id: value,
							value: value,
						});
						input.appendTo("#stations");

						// add label
						var label = $("<label>", {
							for: value,
							text: value
						});
						label.appendTo("#stations");

						input.next().andSelf().wrapAll("<li/>");
					})

					// add event handler for all radio buttons
					$("input").change(function() {
						play($("input:checked").val());
					});

					// initialise the status display
					status();
				},
			}).fail(ajaxFail);
		});
	</script>
</body>
</html>
