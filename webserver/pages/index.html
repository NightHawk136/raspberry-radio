<!doctype html>
<!--
	This code is copyright Stephen C Phillips (http://scphillips.com).
	It is licensed under GPL v3.
-->
<html class="no-js" lang="">
<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>BBC Radio</title>
		<meta name="description" content="Control page for tuning in to BBC radio stations">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="css/normalize.css">
		<link rel="stylesheet" href="css/main.css">
		<link rel="stylesheet" href="css/red.css">
		<link rel="stylesheet" href="css/custom.css">
		<!--script src="js/modernizr-2.8.0.min.js"></script-->
</head>
<body>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>
	<script src="js/icheck-1.0.2.min.js"></script>
	<script src="js/main.js"></script>

	<ul id="controls">
		<li><a href="javascript:status()">Status</a>: <span id="status"></span></li>
		<li><a href="javascript:play('')">Stop</a></li>
		<li><a href="javascript:reset()">Reset</a></li>
	</ul>
	<form>
		<ul id="stations">
		</ul>
	</form>

	<script>
		// once DOM loaded, get all the stations and create their radio buttons
		$(document).ready(function() {
			$.ajax({
				type: "GET",
				url: "/stations",
				dataType: "json",
				success: function(data) {
					$.each(data.stations, function(index, value) {
						var input = $("<input>", {
							type: "radio",
							name: "station",
							id: value,
							value: value,
						});
						input.appendTo("#stations");

						var label = $("<label>", {
							for: value,
							text: value
						});
						label.appendTo("#stations");

						input.next().andSelf().wrapAll("<li/>");
					})

					// style with iCheck and add event handler
					$("input").iCheck({
						radioClass: 'iradio_square-red',
						increaseArea: "30%"
					});
					$("input").on("ifChecked", function() {
						play($("input:checked").val());
					})

					// initialise the status display
					status();
				},
			}).fail(ajaxFail);
		});
	</script>
</body>
</html>
